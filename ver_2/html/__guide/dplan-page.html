<!DOCTYPE html>
<html lang="ko">

<head>
	@@include('@@webRoot/html/_include/app-head-dplan.html',{
		"title": "D플랜(은퇴자금 기록장)"
	})
</head>

<body>
	@@include('@@webRoot/html/_include/app-a11y.html')
	<div class="app">
		<!-- app-header //-->
		@@include('@@webRoot/html/_include/app-integrated-header.html',{
			'pageTit' :'D플랜(은퇴자금 기록장)',
			'type': 'home'
		}) 
		<!-- // app-header -->

		<!-- app-container //-->
		<div class="app-container">

			<!-- dplan-area-in-mydata // -->
			<main class="dplan-area-in-mydata">
			</main>
			<!-- // dplan-area-in-mydata -->

		</div>
		<!-- // app-container -->

	</div>

	<!-- Script -->
	@@include('@@webRoot/html/_include/common-js.html')
	<script src="@@webRoot/static/js/ui.js"></script>
	<script src="@@webRoot/static/js/floatingBanner.js"></script>
	<!-- Add Script -->
	<script>
		function getParameter(name) {
			name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
				results = regex.exec(location.search);
			return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}

		$(document).ready(function() {
			loadLink(getParameter("svcPath"));
		})

		function loadLink(url) {
			gfn_loading.start();
			$.ajax({
				url: url,
				async: false,
				success: function(response, textStatus, jqXHR) {
					// console.log("===== ajax success =====");
					// response = response.replace('<script src="http://localhost:4000/dplan/static/js/jquery-3.4.1.min.js"><\/script>', '');
					var $response = $(response).not('[src$="current-device.min.js"]')
					                           .not('[src$="jquery-3.4.1.min.js"]')
					                           .not('[src$="swiper-bundle.min.js"]');

					$("main.dplan-area-in-mydata").html($response);
					$(window).scrollTop(0);
				},
				error: function(jqXHR, textStatus, errorThrown) {
					// console.log("===== ajax error =====");
				},
				complete: function(jqXHR, textStatus) {
					$(".dplan-area-in-mydata").show();
					gfn_loading.stop();
				}
			});
		}
		
		var gfn_loading = {
			start: function() {
				gfn_pageLoader.show();
			},
			stop: function() {
				gfn_pageLoader.hide();
			}
		}

		function responseFilter() {

		}
	</script>
	<script>
			//GNB 활성화 (번호:menu.js)
			gfn_gnb.select(9,0);
	</script>

	<div class="layered">
		<!-- [MYS_CO_04_06_00_P1] 작성자: 누리어 시스템 이진우 -->
		<!-- 로그인 연장 //-->
		<div class="modal" data-layered-name="modalLoginExtension" id="modalLoginExtension">
			<div class="modal_header">
				<strong class="tit">로그인 연장</strong>
			</div>
			<div class="modal_contents">
				<div class="login-extension-time"><strong>60</strong>초</div>
				<ul data-style="list">
					<li>고객님의 안전한 금융거래 보호를 위해 로그인 후 약 10분동안 이용이 없어 자동 로그아웃 됩니다.</li>
					<li>로그인 시간을 연장하시려면 ‘로그인 연장’ 버튼을 선택해주세요.</li>
				</ul>
				<div class="kb-form" data-status="info">
					<input type="text">
				</div>
			</div>
			<div class="modal_buttons btn-area">
				<button class="btn-solid gray cancel" data-action="close"><span>로그아웃</span></button>
				<button class="btn-solid ok" data-action="close"><span>로그인 연장</span></button>
			</div>
		</div>
		<!-- /로그인 연장 -->

		<div class="bottom-sheet" data-layered-name="bsOtherLogin">
			<div class="bottom-sheet_header">
				<span class="tit">다른 로그인 방법</span>
			</div>
			<div class="bottom-sheet_contents">
				<section class="kb-sec">					
					<ul class="select-list">                
						<li><button type="button"><i class="icon-classic-certificate"></i><strong class="tit">공동 인증서</strong></button></li>
						<li><button type="button"><i class="icon-kb-certificate"></i><strong class="tit">KB모바일 인증서</strong></button></li>
						<li><button type="button"><i class="icon-cloud-certificate"></i><strong class="tit">금융 인증서</strong></button></li>
					</ul>
				</section>
			</div>
			<!-- <div class="bottom-sheet_buttons">
				<button class="btn-solid" data-action="close"><span>확인</span></button>
			</div> -->
			<button class="btn-close" data-action="close"><span>닫기</span></button>
		</div>
	</div>
	<script>
		function modalLoginExtension() {
			gfn_layered.open('modalLoginExtension');
		}
	</script>

	<!-- Promotion 테스트용 추가 -->
    <div class="layered">
        @@include('@@webRoot/html/event/layered/roullete.html')
        @@include('@@webRoot/html/event/layered/random.html')
        @@include('@@webRoot/html/event/layered/lottery.html')
        @@include('@@webRoot/html/event/layered/attendance.html')
        @@include('@@webRoot/html/event/layered/find-word.html')
        @@include('@@webRoot/html/event/layered/initial-quiz.html')
        @@include('@@webRoot/html/event/layered/research.html')
        @@include('@@webRoot/html/event/layered/dice.html')
        @@include('@@webRoot/html/event/layered/ladder.html')
        @@include('@@webRoot/html/event/layered/lottery-giveaway.html')

        <script>
            console.log('프로모션 호출 : es.call(idx 혹은 banner 이름)');
            var es = {
                init : function(){
                    $('.layered').fb({
                        fbName: "fbBirthday",
                        fbAnimation: "fbFadeIn",
                        fbType : "1/4",
                        fbMsg: "홍길동 고객님! <br>생일을 축하드립니다.",
                        fbImgSrc: "@@webRoot/static/images/event/fb-img10.png",
                        fbFormName: "birthdayBanner",
                        fbExpireDay: "1",
                        fbFormMsg: "오늘 하루 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner01",
                        fbAnimation: "fbBottomUp",
                        fbType : "1/4",
                        fbMsg: "마이데이터 (최초)계좌 추가할 때마다<br> 즉석룰렛을 돌리고 돌리고! v(*_*)v",
                        fbCallLayered: 'eventRoullete',
                        fbFunction: 'fnEventRoullete(4)',   //4 ~ 6
                        fbImgSrc: "@@webRoot/static/images/event/fb-img01.png",
                        fbFormName: "promotionBanner",
                        fbExpireDay: "7",
                        fbFormMsg: "일주일간 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner02",
                        fbAnimation: "fbRightLeft",
                        fbType : "1/2",
                        fbMsg: "마이데이터 (최초)계좌 추가할 때마다<br>꽝 없는 복권 증정 v(*_*)v",
                        fbCallLayered: 'eventScratch',
                        fbFunction: 'fnScratchEvent()',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img02.png",
                        fbFormName: "promotionBanner02",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });


                    $('.layered').fb({
                        fbName: "fbBanner03",
                        fbAnimation: "fbBottomUp",
                        fbType : "1/1",
                        fbMsg: "김국민 고객님, <br>마이데이터 통합인증, 전체동의 하시고 랜덤뽑기를 해보세요!",
                        fbCallLayered: 'eventRandom',
                        fbFunction: 'fnRandomEvent()',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img03.png",
                        fbFormName: "promotionBanner03",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner04",
                        fbAnimation: "fbLeftRight",
                        fbType : "1/4",
                        fbMsg: "김국민 고객님, 마이데이터 통합인증, 전체동의 하시고 행운의 복권을 긁어보세요!",
                        fbCallLayered: 'eventScratch02',
                        fbFunction: 'fnScratchEvent02()',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img02.png",
                        fbFormName: "promotionBanner04",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner05",
                        fbAnimation: "fbLeftRight",
                        fbType : "1/4",
                        fbMsg: "KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요! KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!KB마이데이터 오픈 100일 기념 설문조사 이벤트를 참여해 보세요!",
                        fbCallLayered: 'eventResearch',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img04.png",
                        fbFormName: "promotionBanner05",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner06",
                        fbAnimation: "fbLeftRight",
                        fbType : "1/2",
                        fbMsg: "김국민 고객님, <br>마이데이터 통합인증, 전체동의 하시고 <br>행운의 초성퀴즈에 참여해 보세요!",
                        fbCallLayered: 'eventInitialQuiz',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img05.png",
                        fbFormName: "promotionBanner06",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner07",
                        fbType : "1/1",
                        fbAnimation: "fbBottomUp",
                        fbMsg: "김국민 고객님, <br>KB마이데이터 오픈기념 <br>낱말찾기에 참여해 보세요!",
                        fbCallLayered: 'eventFindWord',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img06.png",
                        fbFormName: "promotionBanner07",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner08",
                        fbAnimation: "fbBottomUp",
                        fbType : "1/4",
                        fbMsg: "KB마이데이터 8월 출석체크 이벤트를 참여해 보세요.",
                        fbCallLayered: 'eventAttendance',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img07.png",
                        fbFormName: "promotionBanner08",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner09",
                        fbAnimation: "fbBottomUp",
                        fbType : "1/4",
                        fbMsg: "김국민 고객님, <br>마이데이터 통합인증, 전체동의 하시고 <br>행운의 사다리타기를 참여해 보세요!",
                        fbCallLayered: 'eventLadder',
                        fbFunction: 'fnEventLadder()',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img08.png",
                        fbFormName: "promotionBanner09",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });

                    $('.layered').fb({
                        fbName: "fbBanner10",
                        fbAnimation: "fbBottomUp",
                        fbType : "1/2",
                        fbMsg: "마이데이터 통합인증, 전체동의 하시고 <br>주사위 게임에 참여해 보세요!",
                        fbCallLayered: 'eventRollDice',
                        fbFunction: 'fnRollDice()',
                        fbImgSrc: "@@webRoot/static/images/event/fb-img09.png",
                        fbFormName: "promotionBanner10",
                        fbExpireDay: "1",
                        fbFormMsg: "하루동안 보지 않기",
                        fbShow: false,
                    });
                },
                call: function(name){
                    switch (name){        
                        case 1:                        
                            name = 'fbBirthday';
                            break;
                        case 2:
                            name = 'fbBanner01';
                            break;
                        case 3:
                            name = 'fbBanner02';
                            break;
                        case 4:
                            name = 'fbBanner03';
                            break;
                        case 5:
                            name = 'fbBanner04';
                            break;
                        case 6:
                            name = 'fbBanner05';
                            break;
                        case 7:
                            name = 'fbBanner06';
                            break;
                        case 8:
                            name = 'fbBanner07';
                            break;
                        case 9:
                            name = 'fbBanner08';
                            break;
                        case 10:
                            name = 'fbBanner09';
                            break;
                        case 11:
                            name = 'fbBanner10';
                            break;
                        default:
                            name = name;
                    }
                    gfn_layered.open(name);
                }
            }
            es.init();

            var getOddsOfWinning = function(chance1,chance2,chance3,chance4,chance5,chance6) {
                var cummprob = [chance1,chance2,chance3,chance4,chance5,chance6];
                var x = Math.random();
                var y = 0;
                for (y = 0; y < cummprob.length; y++) {
                    if (cummprob[y] >= x) break;
                }
                return y;
            };
        </script>
    </div>

</body>

</html>