<!DOCTYPE html>
<html lang="ko">

<head>
	@@include('@@webRoot/html/_include/app-head.html',{
	"title": "Last Depth | 1st Depth"
	})
</head>

<body>
	@@include('@@webRoot/html/_include/app-a11y.html')
	<div class="app">
		<!-- 수정 : app-header (Type 구분) //-->
		@@include('@@webRoot/html/_include/app-integrated-header.html',{
		'pageTit':'페이지 타이틀',
		'type':''
		})
		<!-- // 수정 : app-header (Type 구분)-->
		<!-- app-container //-->
		<div class="app-container">
			<!-- app-lnb //-->
			<div class="app-lnb">
				<div class="tab swiper-container">
					<ul class="swiper-wrapper">
						<li class="swiper-slide"><a href="javscript:;">선물</a></li><!-- 수정 : 2021.06.25 -->
						<li class="swiper-slide is-active"><a href="javscript:;">실시간 이벤트</a></li>
						<!-- 수정 : 2021.06.25 -->
						<li class="swiper-slide"><a href="javscript:;">친구추천</a></li><!-- 수정 : 2021.06.25 -->
					</ul>
				</div>
			</div>
			<!-- //app-lnb -->

			<!-- app-content // -->
			<main class="app-content">
				<section class="kb-sec event-area event-roullete">
					<h1>최초 계좌추가<br>룰렛 이벤트</h1>
					<div class="roulette">
						<ul class="wheel" data-percentage="4">
							<li>
								<div class="content" data-img-src="img-voucher.png">
									<strong class="tit">신세계이마트 상품권</strong>
									<p><span class="num">30,000</span>원</p>
								</div>
							</li>
							<li>
								<div class="content" data-img-src="img-pointre.png">
									<strong class="tit">KB 포인트리</strong>
									<p><span class="num">500</span>P</p>
								</div>
							</li>
							<li>
								<div class="content" data-img-src="img-coffee.png">
									<strong class="tit">스타벅스 디저트 세트</strong>
									<p><span class="num">1</span>매</p>
								</div>
							</li>
							<li>
								<div class="content" data-img-src="img-pointre.png">
									<strong class="tit">KB 포인트리</strong>
									<p><span class="num">1000</span>P</p>
								</div>
							</li>
						</ul>
						<button type="button" class="btn-run-wheel"><span>룰렛돌리기<strong>START</strong></span></button>
						<span class="roulette-top"></span>
						<div class="ev-character">
							<span class="roulette-character01"></span>
							<span class="roulette-character02"></span>
							<span class="roulette-character03"></span>
							<span class="roulette-character04"></span>
							<span class="roulette-character05"></span>
						</div>
					</div>

				</section>

				<section class="kb-sec">
					<dl class="event-desc">
						<dt>기간</dt>
						<dd>2021.10.04(월) ~ 2021.10.29(금)</dd>
						<dt>대상</dt>
						<dd>
							KB마이데이터 최초동의 고객 중 통합인증 및 전체동의 완료 고객
						</dd>
						<dt>참여방법</dt>
						<dd>
							- 미완료 고객<br>
							① 상단 ‘동의하러 가기’ 버튼 클릭<br>
							② 통합인증 및 전체동의 완료<br>
							③ 즉석룰렛 스티커 클릭<br>
							④ 룰렛 이벤트의 ‘START’ 버튼 클릭<br>
							⑤ 실시간 당첨 리워드 확인가능<br>
							<br>
							- 완료 고객<br>
							① 마이데이터 선물함 메뉴의 실시간 이벤트에서<br>
							‘룰렛이벤트 배너’ 클릭<br>
							② 룰렛 이벤트의 ‘START’ 버튼 클릭<br>
							③ 실시간 당첨 리워드 확인가능
						</dd>
						<dt>당첨자 발표</dt>
						<dd>
							100% 경품 당첨 실시간 확인 가능
						</dd>
						<dt>경품</dt>
						<dd>
							신세계이마트 상품권 3만원 (1,000명)<br>
							스타벅스 부드러운 디저트 세트 1매 (5,000명)<br>
							스타벅스 아이스 아메리카노 Tall 1매 (10,000명)<br>
							포인트리 500P (420,000명)
						</dd>
					</dl>
					<dl class="event-caution">
						<dt>유의사항</dt>
						<dd>
							- 본 이벤트는 KB국민은행의 이벤트로 사정에 따라 변경 또는 중단될 수 있습니다.<br>
							- 참여고객 대상 지급되는 경품은 참여 즉시 지급되며 마이데이터 선물함 &gt; 선물에서 확인 가능합니다.<br>
							- 기타 자세한 이벤트 내용은 KB마이데이터 담당자 (02-2073-0000, 평일 9~18시 / 주말 및 공휴일 휴무)에게 문의바랍니다.<br>
							<br>
							본 광고물에 대한 유효기간 2021.10.31까지 준법감시인 심의필 제2021-0000호(2021.09.27)
						</dd>
					</dl>
				</section>

			</main>
			<!-- // app-content -->

		</div>
		<!-- // app-container -->

		<!-- Layer (fullpage popup, modal, bottom sheet) // -->
		<div class="layered">
			@@include('@@webRoot/html/menu/layered/mys_mn_06_01_04_p01.html')
		</div>
		<!-- // Layer (fullpage popup, modal, bottom sheet) -->

	</div>
	<!-- Script -->
	@@include('@@webRoot/html/_include/common-js.html')
	<!-- Add Library (this page only)-->
	<script src="@@webRoot/static/js/ui.js"></script>
	<!-- Add Script -->

	<script>
		var $roulletTrigger = $('.btn-run-wheel');
		var $wheel = $('.roulette .wheel');
		var chance = $wheel.data('percentage');

		var baseDeg = 3600;
		$roulletTrigger.on('click', function () {
			//var selectedIdx = Math.floor(Math.random() * chance);
			//var selectedIdx = Math.floor(Math.random() * chance);
			var additionalDeg = Math.floor(Math.random() * 40); //+-5deg
			var selectedIdx = Number(getWeightedSeverity() - 1);
			//console.log(selectedIdx);

			var selectedDeg = baseDeg + (selectedIdx * 90) + additionalDeg;

			$wheel.addClass('is-animating').css({
				'transform': 'rotate(' + selectedDeg + 'deg)'
			});
			$wheel.one('transitionend', function () {
				$wheel.removeClass('is-animating').css({
					'transform': 'rotate(' + (selectedDeg - baseDeg) + 'deg)'
				});
				//Callback

				var winTxt = $wheel.find('li').eq(selectedIdx).find('.content').text();
				var winImg = $wheel.find('li').eq(selectedIdx).find('.content').data('img-src');

				$('.bottom-sheet[data-layered-name="bsRewardDetail"]').find('img').removeAttr('style').attr({
					'src': '@@webRoot/static/images/event/' + winImg,
					'alt': winTxt
				});
				$('.bottom-sheet[data-layered-name="bsRewardDetail"]').find('dt').text(winTxt);


				setTimeout(function () {
					gfn_layered.open('bsRewardDetail');
				}, 500);

			})

		});

		function getWeightedSeverity() {
			var cummprob = [0.001, 0.2, 0.5, 1];
			var x = Math.random();
			var y = 0;
			for (y = 0; y < cummprob.length; y++) {
				if (cummprob[y] >= x) break;
			}
			//return labels[y];
			return y;
		}
	</script>

</body>

</html>
